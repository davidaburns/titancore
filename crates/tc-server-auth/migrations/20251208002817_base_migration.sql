--#: migration.up
CREATE TABLE IF NOT EXISTS account (
    id SERIAL PRIMARY KEY,
    username VARCHAR(32) NOT NULL DEFAULT '',
    salt BYTEA NOT NULL,
    verifier BYTEA NOT NULL,
    session_key_auth BYTEA,
    session_key_bnet BYTEA,
    totp_secret BYTEA,
    email VARCHAR(255) NOT NULL DEFAULT '',
    reg_mail VARCHAR(255) NOT NULL DEFAULT '',
    joindate TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
    last_ip VARCHAR(15) NOT NULL DEFAULT '127.0.0.1',
    last_attempt_ip VARCHAR(15) NOT NULL DEFAULT '127.0.0.1',
    failed_logins INTEGER NOT NULL DEFAULT 0,
    locked SMALLINT NOT NULL DEFAULT 0,
    lock_country VARCHAR(2) NOT NULL DEFAULT '00',
    last_login TIMESTAMPTZ,
    online SMALLINT NOT NULL DEFAULT 0,
    expansion SMALLINT NOT NULL DEFAULT 2,
    mutetime BIGINT NOT NULL DEFAULT 0,
    mutereason VARCHAR(255) NOT NULL DEFAULT '',
    muteby VARCHAR(50) NOT NULL DEFAULT '',
    locale SMALLINT NOT NULL DEFAULT 0,
    os VARCHAR(3) NOT NULL DEFAULT '',
    timezone_offset SMALLINT NOT NULL DEFAULT 0,
    recruiter INTEGER NOT NULL DEFAULT 0,
    CONSTRAINT idx_username UNIQUE (username)

);

COMMENT ON TABLE account IS 'Account System';
COMMENT ON COLUMN account.id IS 'Identifier';

CREATE TABLE IF NOT EXISTS account_banned (
    id INTEGER NOT NULL DEFAULT 0,
    bandate INTEGER NOT NULL DEFAULT 0,
    unbandate INTEGER NOT NULL DEFAULT 0,
    bannedby VARCHAR(50) NOT NULL,
    banreason VARCHAR(255) NOT NULL,
    active SMALLINT NOT NULL DEFAULT 1,

    PRIMARY KEY (id, bandate)
);

COMMENT ON TABLE account_banned IS 'Ban List';
COMMENT ON COLUMN account_banned.id IS 'Account id';

CREATE TABLE IF NOT EXISTS account_muted (
    guid INTEGER NOT NULL DEFAULT 0,
    mutedate INTEGER NOT NULL DEFAULT 0,
    mutetime INTEGER NOT NULL DEFAULT 0,
    muteby VARCHAR(50) NOT NULL,
    PRIMARY KEY (guid, mutedate)
);

COMMENT ON TABLE account_muted IS 'Mute List';
COMMENT ON COLUMN account_muted.guid IS 'Global Unique Identifier';

CREATE TABLE IF NOT EXISTS autobroadcast (
    realmid INTEGER NOT NULL DEFAULT -1,
    id SMALLINT GENERATED BY DEFAULT AS IDENTITY,
    weight SMALLINT DEFAULT 1,
    text TEXT NOT NULL,
    PRIMARY KEY (id, realmid)
);

CREATE TABLE IF NOT EXISTS build_auth_key (
    build INTEGER NOT NULL,
    platform CHAR(4) NOT NULL,
    arch CHAR(4) NOT NULL,
    type CHAR(4) NOT NULL,
    key BYTEA NOT NULL,
    PRIMARY KEY (build, platform, arch, type)
);

INSERT INTO build_auth_key
VALUES
    (25549,'Mac','x64','WoW','\x66FC5E09B8706126795F140308C8C1D8'),
    (25549,'Win','x64','WoW','\x1252624ED8CBD6FAC7D33F5D67A535F3'),
    (25549,'Win','x86','WoW','\xFE594FC35E7F9AFF86D99D8A364AB297'),
    (25996,'Mac','x64','WoW','\x210B970149D6F56CAC9BADF2AAC91E8E'),
    (25996,'Win','x64','WoW','\xC7FF932D6A2174A3D538CA7212136D2B'),
    (25996,'Win','x86','WoW','\x23C59C5963CBEF5B728D13A50878DFCB'),
    (26124,'Mac','x64','WoW','\xC9CA997AB8EDE1C65465CB2920869C4E'),
    (26124,'Win','x64','WoW','\x46DF06D0147BA67BA49AF553435E093F'),
    (26124,'Win','x86','WoW','\xF8C05AE372DECA1D6C81DA7A8D1C5C39'),
    (26365,'Mac','x64','WoW','\xDBE7F860276D6B400AAA86B35D51A417'),
    (26365,'Win','x64','WoW','\x59A53F307288454B419B13E694DF503C'),
    (26365,'Win','x86','WoW','\x2AAC82C80E829E2CA902D70CFA1A833A'),
    (26654,'Mac','x64','WoW','\x9234C1BD5E9687ADBD19F764F2E0E811'),
    (26654,'Win','x64','WoW','\xA752640E8B99FE5B57C1320BC492895A'),
    (26654,'Win','x86','WoW','\xFAC2D693E702B9EC9F750F17245696D8'),
    (26822,'Mac','x64','WoW','\x91003668C245D14ECD8DF094E065E06B'),
    (26822,'Win','x64','WoW','\x2B05F6D746C0C6CC7EF79450B309E595'),
    (26822,'Win','x86','WoW','\x283E8D77ECF7060BE6347BE4EB99C7C7'),
    (26899,'Mac','x64','WoW','\x8368EFC2021329110A16339D298200D4'),
    (26899,'Win','x64','WoW','\x3551EF0028B51E92170559BD25644B03'),
    (26899,'Win','x86','WoW','\xF462CD2FE4EA3EADF875308FDBB18C99'),
    (26972,'Mac','x64','WoW','\x341CFEFE3D72ACA9A4407DC535DED66A'),
    (26972,'Win','x64','WoW','\x6E212DEF6A0124A3D9AD07F5E322F7AE'),
    (26972,'Win','x86','WoW','\x797ECC19662DCBD5090A4481173F1D26'),
    (28153,'Win','x64','WoW','\xDD626517CC6D31932B479934CCDC0ABF'),
    (30706,'Win','x64','WoW','\xBB6D9866FE4A19A568015198783003FC'),
    (30993,'Win','x64','WoW','\x2BAD61655ABC2FC3D04893B536403A91'),
    (31229,'Win','x64','WoW','\x8A46F23670309F2AAE85C9A47276382B'),
    (31429,'Win','x64','WoW','\x7795A507AF9DC3525EFF724FEE17E70C'),
    (31478,'Win','x64','WoW','\x7973A8D54BDB8B798D9297B096E771EF'),
    (32305,'Win','x64','WoW','\x21F5A6FC7AD89FBF411FDA8B8738186A'),
    (32494,'Win','x64','WoW','\x58984ACE04919401835C61309A848F8A'),
    (32580,'Win','x64','WoW','\x87C2FAA0D7931BF016299025C0DDCA14'),
    (32638,'Win','x64','WoW','\x5D07ECE7D4A867DDDE615DAD22B76D4E'),
    (32722,'Win','x64','WoW','\x1A09BE1D38A122586B4931BECCEAD4AA'),
    (32750,'Mac','x64','WoW','\xEF1F4E4D099EA2A81FD4C0DEBC1E7086'),
    (32750,'Win','x64','WoW','\xC5CB669F5A5B237D1355430877173207'),
    (32978,'Mac','x64','WoW','\x1852C1F847E795D6EB45278CD433F339'),
    (32978,'Win','x64','WoW','\x76AE2EA03E525D97F5688843F5489000'),
    (33369,'Mac','x64','WoW','\xF5A849C70A1054F07EA3AB833EBF6671'),
    (33369,'Win','x64','WoW','\x5986AC18B04D3C403F56A0CF8C4F0A14'),
    (33528,'Win','x64','WoW','\x0ECE033CA9B11D92F7D2792C785B47DF'),
    (33724,'Win','x64','WoW','\x38F7BBCF284939DD20E8C64CDBF9FE77'),
    (33775,'Mac','x64','WoW','\x354D2DE619D124EE1398F76B0436FCFC'),
    (33775,'Win','x64','WoW','\xB826300A8449ED0F6EF16EA747FA2D2E'),
    (33941,'Win','x64','WoW','\x88AF1A36D2770D0A6CA086497096A889'),
    (34220,'Win','x64','WoW','\xB5E35B976C6BAF82505700E7D9666A2C'),
    (34601,'Win','x64','WoW','\x0D7DF38F725FABA4F009257799A10563'),
    (34769,'Win','x64','WoW','\x93F9B9AF6397E3E4EED94D36D16907D2'),
    (34963,'Mac','x64','WoW','\xC5658A17E702163447BAAAE46D130A1B'),
    (34963,'Win','x64','WoW','\x7BA50C879C5D04221423B02AC3603A11'),
    (35249,'Win','x64','WoW','\xC7B11F9AE9FF1409F5582902B3D10D1C'),
    (35284,'Mac','x64','WoW','\xA6201B0AC5A73D13AB2FDCC79BB252AF'),
    (35284,'Win','x64','WoW','\xEA3818E7DCFD2009DBFC83EE3C1E4F1B'),
    (35435,'Mac','x64','WoW','\x8FE657C14A46BCDB2CE6DA37E430450E'),
    (35435,'Win','x64','WoW','\xBB397A92FE23740EA52FC2B5BA2EC8E0'),
    (35662,'Mac','x64','WoW','\x5966016C368ED9F7AAB603EE6703081C'),
    (35662,'Win','x64','WoW','\x578BC94870C278CB6962F30E6DC203BB'),
    (36753,'Win','x64','WoW','\x386FDE8559B5EAD67B791B490B200B88'),
    (36839,'Win','x64','WoW','\x356EB4412B8EFCF72E3AF50D5181D529'),
    (36949,'Win','x64','WoW','\x51C074CD8A09A75384B9B44188C56981'),
    (37142,'Win','x64','WoW','\x5D9CFB3139F0D1B6C2B304261F9EABC9'),
    (37176,'Win','x64','WoW','\x3C725EA504EC3DAED143EB6FF3B48CDA'),
    (37474,'Mac','x64','WoW','\x024C9BE7E44237B7E81C6D42E678D433'),
    (37474,'Win','x64','WoW','\x0DE685BBB0551086E7FBDC0B4BB06A5B'),
    (38134,'Win','x64','WoW','\x32275ED0F13B357C28BDB0E611EF9E31'),
    (38556,'Win','x64','WoW','\xEC7D5AF64364AC3E7181F3FBA1B3A882'),
    (39653,'Win','x64','WoW','\x10D015AB1EEB91310428D9C57EE24632'),
    (39804,'Win','x64','WoW','\xE42D2BBA12ED260A76F9B1E477E19EA5'),
    (40000,'Win','x64','WoW','\x4CB1433AB637F09F03FBBD1B221B04B0'),
    (40120,'Mac','x64','WoW','\x853F0F2985CEAED46DF422583CD07A7C'),
    (40120,'Win','x64','WoW','\x04F47EAEFD8BDEFE14AA0350EA336678'),
    (40443,'Win','x64','WoW','\x8597BB43E8AB38C85504E8BFB72ABBF5'),
    (40593,'Win','x64','WoW','\xBA14570F2D62D5F61953394164A8DAE2'),
    (40725,'Win','x64','WoW','\xC1EBDBEB9BB2956EBCCEF7C9D27A1B3B'),
    (40906,'Win','x64','WoW','\xF5FC259C8635488AFE0D0CD023F361D4'),
    (40944,'Win','x64','WoW','\x368FC7FABAF487A8A049C11970657074'),
    (40966,'Win','x64','WoW','\xD90F47AF21F381D2D8F3763B994BAC88'),
    (41031,'Win','x64','WoW','\x019A0FACD6B0D6374B7BA69A5B677449'),
    (41079,'Win','x64','WoW','\xF8853CF823BC0BBE8A9677A762DFAEE1'),
    (41288,'Win','x64','WoW','\x871C0C9691DBC536EB24B68EC73FAD5B'),
    (41323,'Win','x64','WoW','\xE53D0DF1FAC1A59A1C8071B295A04A1D'),
    (41359,'Win','x64','WoW','\x5F8D7F2A690A4375A1B52A28D6D681FA'),
    (41488,'Win','x64','WoW','\x1BC91EC368705815F3F532B553DAD981'),
    (41793,'Win','x64','WoW','\xB3B47DA3B7615570742A55B96614EE1C'),
    (42010,'Win','x64','WoW','\x302970161D16417B5BE553CC530E011A'),
    (42423,'Win','x64','WoW','\x0B03614A7E94DD57548596BE420E9DC2'),
    (42488,'Win','x64','WoW','\xA78755E6928D83A271C5D1EE3CDB6F15'),
    (42521,'Win','x64','WoW','\x5FE6C12FC407C6B15B4A5D3B5B4A5D3B'),
    (42538,'Win','x64','WoW','\x71A7504BD53F8DE518F24265D37310AE'),
    (42560,'Win','x64','WoW','\x115FE8C38A8D67CA4664BB192E0F0DFE'),
    (42614,'Win','x64','WoW','\x772BE726FEEF42124255D2EA7973CA18'),
    (42698,'Win','x64','WoW','\xB4497B1CD11FC974C5FB09548AC27269'),
    (42825,'Win','x64','WoW','\xA14DA228C6A6AFF1DDBA51218939E557'),
    (42852,'Win','x64','WoW','\xDE9F9F0C3CC8FD54D3AFF99CEFFCE129'),
    (42937,'Win','x64','WoW','\xF5FC75E70874752C92846B3333920E63'),
    (42979,'Win','x64','WoW','\xE1DD38AE6450FC4D2AE4609233C59E54'),
    (43114,'Win','x64','WoW','\xF75C9380CCB24A48A24EEE52C1594A7E'),
    (43206,'Win','x64','WoW','\xDDE806532C7704FFB75F256DC5F1F3D9'),
    (43340,'Win','x64','WoW','\x70E46D2D888E84DF9316EA849B068CF4'),
    (43345,'Win','x64','WoW','\xD911ABFCDA030DEE8CAF4EE3F60DEE13'),
    (43971,'Win','x64','WoW','\x681CF99E61FB0005A5C7D31D0AAD1ED9'),
    (44015,'Win','x64','WoW','\xFCF0BDA7C98BFEF92AE6D8C39A217ABD'),
    (44061,'Win','x64','WoW','\xFD2B5C0B3293FE0E9CAA6EB0B7788119'),
    (44127,'Win','x64','WoW','\x787887CEC9FCC9B516481F60E4FC34A8'),
    (44232,'Win','x64','WoW','\x81F0A71DF7E9873BB3750022D64D33CF'),
    (44325,'Win','x64','WoW','\x138A7D524D268A7F9934C3D148E8F01B'),
    (44730,'Win','x64','WoW','\xFC0B18C47BB4C79F4300CA0FF3E5CAC7'),
    (44908,'Win','x64','WoW','\xBFFAEC40C9BCD591C7C959A9D5A8BA8C'),
    (45114,'Win','x64','WoW','\xD7AFE240BD00F06C30D0C2D16E54A8BE'),
    (45161,'Win','x64','WoW','\x74BD2E787A98B145B063BDA9A98F6CBD'),
    (45338,'Win','x64','WoW','\x5CE2094A41B61EDA9DF56378BC3B1DE0'),
    (45745,'Win','x64','WoW','\x0F6DC90161694D765A595A3AF603166B'),
    (46479,'Win','x64','WoW','\xCB9AF4D89B60A3ABA288D395D315D932'),
    (46658,'Win','x64','WoW','\x3F8EFB085428D75360E9EFE25CD8639A'),
    (46689,'Win','x64','WoW','\xD9A11D188D6AD60906F5467510EFD3AA'),
    (46702,'Win','x64','WoW','\x01B4D1688FF97DC9AAFCCD0A0B842C0B'),
    (46741,'Win','x64','WoW','\x4C0F4A7EC2098AF1FBA745848EC79A78'),
    (46801,'Win','x64','WoW','\xE6AC18D1EA5D36ABFFAE5EDED80630DF'),
    (46879,'Win','x64','WoW','\xEFEC43936051DD1A210633AF1F6B63DB'),
    (46924,'Win','x64','WoW','\xE6CE0B1A8119F069ECF1E7DBAA7BB2F8'),
    (47067,'Win','x64','WoW','\x63862CFCDEA6BD2BD7F740EB36B65657'),
    (47187,'Win','x64','WoW','\x711F8455C5000C237292E1E6E90631E1'),
    (47213,'Win','x64','WoW','\x23C50D88CEAC0A8696ADDE8DD244D4A2'),
    (47631,'Win','x64','WoW','\xF986AB91D0AEB20822EFB72F4256713C'),
    (47777,'Win','x64','WoW','\xA88C04915AB9E035A104E55C4DCF5F9F'),
    (47799,'Win','x64','WoW','\x7364EB093C23DB2CDC9513D5A7B4933E'),
    (47825,'Win','x64','WoW','\x82A3B94E5E727AF3A208B471FF2054C0'),
    (47849,'Win','x64','WoW','\xDD8BBE2087A28C0AF4984CBE23A1C707'),
    (47871,'Win','x64','WoW','\x8E4F7D30EE4982B02B3B3F8837C2C4F2'),
    (47884,'Win','x64','WoW','\x2B7A002BC359F2C31104BC2DE04302BF'),
    (47936,'Win','x64','WoW','\x833D30D8FBC43B3FAE99CD3898D70849'),
    (47967,'Win','x64','WoW','\xCFE225D0089E224D9E7541D3B5C26478'),
    (48001,'Win','x64','WoW','\x4B0260A37BD95B615E71048469E6D5BB'),
    (48069,'Win','x64','WoW','\x558CDF958FA082E95849779C7C6945E5'),
    (48317,'Win','x64','WoW','\xC096E37B45B43244E9C79916604DD4AF'),
    (48397,'Win','x64','WoW','\x64BA8779EAA97E6C57982B6B1A5B32E7'),
    (48526,'Win','x64','WoW','\xD5B7D3303A2A741E6913EE1AEB0BCB65'),
    (48676,'Win','x64','WoW','\xE059FB74DFF6438CC20C7F28900F64CA'),
    (48749,'Win','x64','WoW','\x92DBCCA0E33DFB8A17A2B6A39246B288'),
    (48838,'Win','x64','WoW','\x9E6F4E1E46EF228D2DE90F7BC48AAA96'),
    (48865,'Win','x64','WoW','\x4B774ABE7B34D6702571B4279A4B6A13'),
    (48892,'Win','x64','WoW','\xAA31BF27458321B03A1A346964DD7B9D'),
    (48966,'Win','x64','WoW','\x823142CA131FBB715FF55D4343E55C6D'),
    (48999,'Win','x64','WoW','\x79BA6FF0F9672EEF875F64155C8B62D4'),
    (49267,'Win','x64','WoW','\xEEE77EA5A216E0731ADBB41AEFB1DF31'),
    (49318,'Win','x64','WoW','\xAF439AEE62EE48B36C1725111E3D9BBF'),
    (49343,'Win','x64','WoW','\x301A0B4C0942B9B6F605B903AD6C1F60'),
    (49407,'Win','x64','WoW','\x6413820DC9885BB0693B37090CBB2F30'),
    (49426,'Win','x64','WoW','\xD85EDFBFE9A94A55E2B4510BE41C19B2'),
    (49444,'Win','x64','WoW','\x363B2B05285BDD8857419D2866316D3C'),
    (49474,'Win','x64','WoW','\x44A7D2B352EE3D098A3CB4C2F1065E37'),
    (49570,'Win','x64','WoW','\xB024DE67ACAEB9E8EE6DB38DC53E8281'),
    (49679,'Win','x64','WoW','\x9CE59B68D8797EBF00581F41138F4316'),
    (49741,'Win','x64','WoW','\x0EF181E2BB0E946CF3B7422ADEB6CD1A'),
    (49801,'Win','x64','WoW','\x0832179567B66CA85DBD5678B604C683'),
    (49890,'Win','x64','WoW','\x22A5B8A1EB797A64995F705B3DBCB14C'),
    (50000,'Win','x64','WoW','\x02F06FFA2296FD66384295DBFD5A4C91'),
    (50401,'Win','x64','WoW','\x3EEF52D902CCE81D16D0E255F0AA4938'),
    (50438,'Win','x64','WoW','\x0B5F68F06B129CB4C57702F6D30F260B'),
    (50467,'Win','x64','WoW','\x5E996B1CDCEE68432D6340138E68D1EB'),
    (50469,'Win','x64','WoW','\x1768CCB6589E16AB3BEFA9D608A393A2'),
    (50504,'Win','x64','WoW','\x7D5FD20C0B32C9AF5DD65433B391D49C'),
    (50585,'Win','x64','WoW','\xC4F7CC38A3B84935A485F7EDAD3E764B'),
    (50622,'Win','x64','WoW','\xD23A26FD75FD9A6073EB7060AA28E6A7'),
    (50747,'Win','x64','WoW','\x2D3C386A9C45C27304ED3A3C6EB3F7C8'),
    (50791,'Win','x64','WoW','\x0BE7D0BB07EF37C25CBC682409091EA0'),
    (51130,'Win','x64','WoW','\x44CD2C91E4F0655DA387483726CE4035'),
    (51187,'Win','x64','WoW','\x74E2055D3965269447B5CB1B31FC71C6'),
    (51237,'Win','x64','WoW','\xC8660A21B766646FBD67F481CFCF55C3'),
    (51261,'Win','x64','WoW','\x1BEBB57AE450331E9F8C301AA7876FAB'),
    (51313,'Win','x64','WoW','\x35419ED0AB16735CF720858F45DC300C'),
    (51421,'Win','x64','WoW','\x45E24D6F3335269787DF2B2063939002'),
    (51485,'Win','x64','WoW','\xEC549E1D0A5DD85C03E7A9D93B7DC6D1'),
    (51536,'Win','x64','WoW','\x570EEA10A8EC169C3FF9621D1B635BB4'),
    (51754,'Win','x64','WoW','\xBED5A861C071AB41FEF6087E0C37BB1A'),
    (51886,'Win','x64','WoW','\x09CF8919FD2EABDEAEBC0C810F53B511'),
    (51972,'Win','x64','WoW','\x444DC7EF3544B6670C18884DADA00428'),
    (52038,'Win','x64','WoW','\xA8EF004ADED8A3AFF5A67D2BB8D95795'),
    (52068,'Win','x64','WoW','\xA44F842BACCC7EE8E2975FAF01F12474'),
    (52095,'Win','x64','WoW','\xBA36382887D16D274EA9149695F0C9C8'),
    (52106,'Win','x64','WoW','\x95F43869B7D881212CBC1690B8F393ED'),
    (52129,'Win','x64','WoW','\x02DD842F2A7162EEB8FD5B9D325606F8'),
    (52148,'Win','x64','WoW','\x8A969717C8CDC6E7FF4C54D5CB00C224'),
    (52188,'Win','x64','WoW','\x977DF9993E94855DED5E328BA7A2F21F'),
    (52301,'Win','x64','WoW','\x821AA3BB237B400B82F44970250539AA'),
    (52393,'Win','x64','WoW','\xB013ED23B7EF51B29A45594D9BBB0D03'),
    (52485,'Win','x64','WoW','\x5805CEB4650730AE489258DD30E34441'),
    (52545,'Win','x64','WoW','\xFB52179A8355A46EDBFBDC8E8E5CDAFD'),
    (52607,'Win','x64','WoW','\x8F002E4AADCAEABB08ABC2880B31AD60'),
    (52649,'Win','x64','WoW','\xD0B779FBECEBC1ED5A85D83F03C8A75B'),
    (52808,'Win','x64','WoW','\x6276712B6C8AEA21CD5D94D52FEE70EE'),
    (52902,'Win','x64','WoW','\xD4F0A24CDF165628538C1C387A326AF3'),
    (52968,'Win','x64','WoW','\x2D247FD440C44D4F1BF80B075B8720F2'),
    (52983,'Win','x64','WoW','\xB1E5ADA5FDD06C9AB5E5D8A6983324AC'),
    (53007,'Win','x64','WoW','\xA21AFB4D381C56AF471D994258C0EEF5'),
    (53040,'Win','x64','WoW','\x2F1283BF7B7F307B70DBBD75CC42D7C3'),
    (53104,'Win','x64','WoW','\xDBD79EC8DF044B53C78931B985CAB406'),
    (53162,'Win','x64','WoW','\x8A67511FBF8984EEE2B630F7CB23376A'),
    (53212,'Win','x64','WoW','\x08761EFF2F9B639364B9A9FBFFFFB949'),
    (53262,'Win','x64','WoW','\x614A72D53126348A4927EC0F53FD2B7A'),
    (53441,'Win','x64','WoW','\xBFDD7D0FE87D5F75E6DEB4F5C99D7C99'),
    (53584,'Win','x64','WoW','\xCDD7A93659A03460B5A6CE1C4ACE5554'),
    (53840,'Win','x64','WoW','\xAC97D745C60DD3DC5F973E55C0E3649E'),
    (53877,'Win','x64','WoW','\x16320F95B63846A2276E1D2612C34AD4'),
    (53913,'Win','x64','WoW','\x475680680B2192EBCF6744D14F755199'),
    (53989,'Win','x64','WoW','\x3AEB90ACB9E18B88BA1021F52D51B857'),
    (54070,'Win','x64','WoW','\xFDA08264B7587250CF78F9B960218169'),
    (54205,'Win','x64','WoW','\x589D59EB3F0D6D77C2175D9302F78FDD'),
    (54358,'Win','x64','WoW','\x89C733D366E845FB9264404CD48CCA89'),
    (54499,'Win','x64','WoW','\x6AC1F6180FC4C390F782DB933BD83326'),
    (54577,'Win','x64','WoW','\xCBBBBBFFB2C652F0F4A7848D86E1B063'),
    (54601,'Win','x64','WoW','\xF8B866CF7DB9A12273F35B3929627375'),
    (54604,'Win','x64','WoW','\xA5FF4CE535F69D4D7F638CB2C11F2243'),
    (54630,'Win','x64','WoW','\xF37935510BA6B559363C160E1DF18230'),
    (54673,'Win','x64','WoW','\xAF8B9C8A9C6128498E85228B965A004D'),
    (54717,'Win','x64','WoW','\x862BBA15158DFF6B56BCF71C1B34D41A'),
    (54736,'Win','x64','WoW','\xFE58F039D91E1C248886A2828127CA2F'),
    (54762,'Win','x64','WoW','\x5F7FDA560030255445B713456A286CFA'),
    (54847,'Win','x64','WoW','\x32FDA0353160EC51EB36195CFACEF2B7'),
    (54904,'Win','x64','WoW','\x09CBEC3C0DEA28BCA79F1FD9B879B0E3'),
    (54988,'Win','x64','WoW','\x8F2791553226871977B4F9D7F1137311'),
    (55142,'Win','x64','WoW','\x298B99B5AD67EA3D2AB4B3E07A415305'),
    (55165,'Win','x64','WoW','\x26D4D1C01434A8A6723DCABC944B6FD0'),
    (55261,'Win','x64','WoW','\x84E153A3DD1F8249274B91047AAC7AED'),
    (55461,'Win','x64','WoW','\xC4522674F854EFECC76C898EC9545099'),
    (55664,'Win','x64','WoW','\xDBCA58486FAAA0FE54EA287A3047E923'),
    (55666,'Win','x64','WoW','\xF7E5A88E4D3615B652C8B9D76E7F617C'),
    (55792,'Win','x64','WoW','\xC4DECDAA44BC548FF09EF3BB837D2147'),
    (55793,'Win','x64','WoW','\xF9CF3232AD1C38C2028668D5BB64198F'),
    (55818,'Win','x64','WoW','\x903A9B546248F71B16D9D9B06A072C24'),
    (55824,'Win','x64','WoW','\x8A6F13269A2896067A1E88789FB41BA7'),
    (55846,'Win','x64','WoW','\xBB5E1BED705872C226834B95A9E9F8A9'),
    (55933,'Win','x64','WoW','\xC34D42CB351C400D1319D221197CF18D'),
    (55939,'Win','x64','WoW','\x91529F4CE41DE4E54E132660ACDCADC5'),
    (55959,'Win','x64','WoW','\xED57E0538FD1CE99B171BE34823148A9'),
    (55960,'Win','x64','WoW','\x078C056CFC7B371BDE1BAF308E6C19AF'),
    (56008,'Win','x64','WoW','\x00FCD6BFFCCCBA7A8E71E307EA6EBD0C'),
    (56110,'Win','x64','WoW','\x800BCA228E2FAE37ED160F3C09E21F3A'),
    (56162,'Win','x64','WoW','\x6F5C93BA436665A94DB67CE5361D4EA8'),
    (56196,'Mac','A64','WoW','\x778F6A5DF79A4EF1B86F651F3B303CE7'),
    (56196,'Win','x64','WoW','\x81FC14274BFF0347FFF9C8B1AA6BED9B'),
    (56263,'Win','x64','WoW','\xEA8472C99236CC617BF518A924014D56'),
    (56288,'Mac','A64','WoW','\x41710C793EF021721F14B06EC1896D3F'),
    (56288,'Win','x64','WoW','\x03544E35D0480938E5C1238B3A26BDDD'),
    (56311,'Mac','A64','WoW','\x412D3200715AAFDC0522DF031A941F0E'),
    (56311,'Win','x64','WoW','\xAC6415575AEE4D32735FFAD0C57226B2'),
    (56313,'Mac','A64','WoW','\xA83ED19EE659BC95CC322D1E49BDEDBB'),
    (56313,'Win','x64','WoW','\xEAF769009A9AD3B1AA0414E1C344074B');

CREATE TABLE IF NOT EXISTS build_executable_hash (
    build INTEGER NOT NULL,
    platform CHAR(4) NOT NULL,
    executableHash BYTEA NOT NULL,
    PRIMARY KEY (build, platform)
);

INSERT INTO build_executable_hash
VALUES
    (5875,'OSX','\x8D173CC381961EEBABF336F5E6675B101BB513E5'),
    (5875,'Win','\x95EDB27C7823B363CBDDAB56A392E7CB73FCCA20'),
    (8606,'OSX','\xD8B0ECFE534BC1131E19BAD1D4C0E813EEE4994F'),
    (8606,'Win','\x319AFAA3F2559682F9FF658BE01456255F456FB1'),
    (12340,'OSX','\xB706D13FF2F4018839729461E3F8A0E2B5FDC034'),
    (12340,'Win','\xCDCBBD5188315E6B4D19449D492DBCFAF156A347');

CREATE TABLE IF NOT EXISTS build_info (
    build INTEGER PRIMARY KEY NOT NULL,
    majorVersion INTEGER DEFAULT NULL,
    minorVersion INTEGER DEFAULT NULL,
    bugfixVersion INTEGER DEFAULT NULL,
    hotfixVersion CHAR(3) DEFAULT NULL
);

INSERT INTO build_info
VALUES
    (5875,1,12,1,NULL),
    (6005,1,12,2,NULL),
    (6141,1,12,3,NULL),
    (8606,2,4,3,NULL),
    (9947,3,1,3,NULL),
    (10505,3,2,2,'a'),
    (11159,3,3,0,'a'),
    (11403,3,3,2,NULL),
    (11723,3,3,3,'a'),
    (12340,3,3,5,'a'),
    (13623,4,0,6,'a'),
    (13930,3,3,5,'a'),
    (14545,4,2,2,NULL),
    (15595,4,3,4,NULL),
    (19116,6,0,3,NULL),
    (19243,6,0,3,NULL),
    (19342,6,0,3,NULL),
    (19702,6,1,0,NULL),
    (19802,6,1,2,NULL),
    (19831,6,1,2,NULL),
    (19865,6,1,2,NULL),
    (20182,6,2,0,'a'),
    (20201,6,2,0,NULL),
    (20216,6,2,0,NULL),
    (20253,6,2,0,NULL),
    (20338,6,2,0,NULL),
    (20444,6,2,2,NULL),
    (20490,6,2,2,'a'),
    (20574,6,2,2,'a'),
    (20726,6,2,3,NULL),
    (20779,6,2,3,NULL),
    (20886,6,2,3,NULL),
    (21355,6,2,4,NULL),
    (21463,6,2,4,NULL),
    (21742,6,2,4,NULL),
    (22248,7,0,3,NULL),
    (22293,7,0,3,NULL),
    (22345,7,0,3,NULL),
    (22410,7,0,3,NULL),
    (22423,7,0,3,NULL),
    (22498,7,0,3,NULL),
    (22522,7,0,3,NULL),
    (22566,7,0,3,NULL),
    (22594,7,0,3,NULL),
    (22624,7,0,3,NULL),
    (22747,7,0,3,NULL),
    (22810,7,0,3,NULL),
    (22900,7,1,0,NULL),
    (22908,7,1,0,NULL),
    (22950,7,1,0,NULL),
    (22995,7,1,0,NULL),
    (22996,7,1,0,NULL),
    (23171,7,1,0,NULL),
    (23222,7,1,0,NULL),
    (23360,7,1,5,NULL),
    (23420,7,1,5,NULL),
    (23911,7,2,0,NULL),
    (23937,7,2,0,NULL),
    (24015,7,2,0,NULL),
    (24330,7,2,5,NULL),
    (24367,7,2,5,NULL),
    (24415,7,2,5,NULL),
    (24430,7,2,5,NULL),
    (24461,7,2,5,NULL),
    (24742,7,2,5,NULL),
    (25549,7,3,2,NULL),
    (25996,7,3,5,NULL),
    (26124,7,3,5,NULL),
    (26365,7,3,5,NULL),
    (26654,7,3,5,NULL),
    (26822,7,3,5,NULL),
    (26899,7,3,5,NULL),
    (26972,7,3,5,NULL),
    (28153,8,0,1,NULL),
    (30706,8,1,5,NULL),
    (30993,8,2,0,NULL),
    (31229,8,2,0,NULL),
    (31429,8,2,0,NULL),
    (31478,8,2,0,NULL),
    (32305,8,2,5,NULL),
    (32494,8,2,5,NULL),
    (32580,8,2,5,NULL),
    (32638,8,2,5,NULL),
    (32722,8,2,5,NULL),
    (32750,8,2,5,NULL),
    (32978,8,2,5,NULL),
    (33369,8,3,0,NULL),
    (33528,8,3,0,NULL),
    (33724,8,3,0,NULL),
    (33775,8,3,0,NULL),
    (33941,8,3,0,NULL),
    (34220,8,3,0,NULL),
    (34601,8,3,0,NULL),
    (34769,8,3,0,NULL),
    (34963,8,3,0,NULL),
    (35249,8,3,7,NULL),
    (35284,8,3,7,NULL),
    (35435,8,3,7,NULL),
    (35662,8,3,7,NULL),
    (36753,9,0,2,NULL),
    (36839,9,0,2,NULL),
    (36949,9,0,2,NULL),
    (37142,9,0,2,NULL),
    (37176,9,0,2,NULL),
    (37474,9,0,2,NULL),
    (38134,9,0,5,NULL),
    (38556,9,0,5,NULL),
    (39653,9,1,0,NULL),
    (39804,9,1,0,NULL),
    (40000,9,1,0,NULL),
    (40120,9,1,0,NULL),
    (40443,9,1,0,NULL),
    (40593,9,1,0,NULL),
    (40725,9,1,0,NULL),
    (40906,9,1,5,NULL),
    (40944,9,1,5,NULL),
    (40966,9,1,5,NULL),
    (41031,9,1,5,NULL),
    (41079,9,1,5,NULL),
    (41288,9,1,5,NULL),
    (41323,9,1,5,NULL),
    (41359,9,1,5,NULL),
    (41488,9,1,5,NULL),
    (41793,9,1,5,NULL),
    (42010,9,1,5,NULL),
    (42423,9,2,0,NULL),
    (42488,9,2,0,NULL),
    (42521,9,2,0,NULL),
    (42538,9,2,0,NULL),
    (42560,9,2,0,NULL),
    (42614,9,2,0,NULL),
    (42698,9,2,0,NULL),
    (42825,9,2,0,NULL),
    (42852,9,2,0,NULL),
    (42937,9,2,0,NULL),
    (42979,9,2,0,NULL),
    (43114,9,2,0,NULL),
    (43206,9,2,0,NULL),
    (43340,9,2,0,NULL),
    (43345,9,2,0,NULL),
    (43971,9,2,5,NULL),
    (44015,9,2,5,NULL),
    (44061,9,2,5,NULL),
    (44127,9,2,5,NULL),
    (44232,9,2,5,NULL),
    (44325,9,2,5,NULL),
    (44730,9,2,5,NULL),
    (44908,9,2,5,NULL),
    (45114,9,2,7,NULL),
    (45161,9,2,7,NULL),
    (45338,9,2,7,NULL),
    (45745,9,2,7,NULL),
    (46479,10,0,2,NULL),
    (46658,10,0,2,NULL),
    (46689,10,0,2,NULL),
    (46702,10,0,2,NULL),
    (46741,10,0,2,NULL),
    (46801,10,0,2,NULL),
    (46879,10,0,2,NULL),
    (46924,10,0,2,NULL),
    (47067,10,0,2,NULL),
    (47187,10,0,2,NULL),
    (47213,10,0,2,NULL),
    (47631,10,0,2,NULL),
    (47777,10,0,5,NULL),
    (47799,10,0,5,NULL),
    (47825,10,0,5,NULL),
    (47849,10,0,5,NULL),
    (47871,10,0,5,NULL),
    (47884,10,0,5,NULL),
    (47936,10,0,5,NULL),
    (47967,10,0,5,NULL),
    (48001,10,0,5,NULL),
    (48069,10,0,5,NULL),
    (48317,10,0,5,NULL),
    (48397,10,0,5,NULL),
    (48526,10,0,5,NULL),
    (48676,10,0,7,NULL),
    (48749,10,0,7,NULL),
    (48838,10,0,7,NULL),
    (48865,10,0,7,NULL),
    (48892,10,0,7,NULL),
    (48966,10,0,7,NULL),
    (48999,10,0,7,NULL),
    (49267,10,0,7,NULL),
    (49318,10,1,0,NULL),
    (49343,10,0,7,NULL),
    (49407,10,1,0,NULL),
    (49426,10,1,0,NULL),
    (49444,10,1,0,NULL),
    (49474,10,1,0,NULL),
    (49570,10,1,0,NULL),
    (49679,10,1,0,NULL),
    (49741,10,1,0,NULL),
    (49801,10,1,0,NULL),
    (49890,10,1,0,NULL),
    (50000,10,1,0,NULL),
    (50401,10,1,5,NULL),
    (50438,10,1,5,NULL),
    (50467,10,1,5,NULL),
    (50469,10,1,5,NULL),
    (50504,10,1,5,NULL),
    (50585,10,1,5,NULL),
    (50622,10,1,5,NULL),
    (50747,10,1,5,NULL),
    (50791,10,1,5,NULL),
    (51130,10,1,5,NULL),
    (51187,10,1,7,NULL),
    (51237,10,1,7,NULL),
    (51261,10,1,7,NULL),
    (51313,10,1,7,NULL),
    (51421,10,1,7,NULL),
    (51485,10,1,7,NULL),
    (51536,10,1,7,NULL),
    (51754,10,1,7,NULL),
    (51886,10,1,7,NULL),
    (51972,10,1,7,NULL),
    (52038,10,2,0,NULL),
    (52068,10,2,0,NULL),
    (52095,10,2,0,NULL),
    (52106,10,2,0,NULL),
    (52129,10,2,0,NULL),
    (52148,10,2,0,NULL),
    (52188,10,2,0,NULL),
    (52301,10,2,0,NULL),
    (52393,10,2,0,NULL),
    (52485,10,2,0,NULL),
    (52545,10,2,0,NULL),
    (52607,10,2,0,NULL),
    (52649,10,2,0,NULL),
    (52808,10,2,0,NULL),
    (52902,10,2,5,NULL),
    (52968,10,2,5,NULL),
    (52983,10,2,5,NULL),
    (53007,10,2,5,NULL),
    (53040,10,2,5,NULL),
    (53104,10,2,5,NULL),
    (53162,10,2,5,NULL),
    (53212,10,2,5,NULL),
    (53262,10,2,5,NULL),
    (53441,10,2,5,NULL),
    (53584,10,2,5,NULL),
    (53840,10,2,6,NULL),
    (53877,10,2,6,NULL),
    (53913,10,2,6,NULL),
    (53989,10,2,6,NULL),
    (54070,10,2,6,NULL),
    (54205,10,2,6,NULL),
    (54358,10,2,6,NULL),
    (54499,10,2,6,NULL),
    (54577,10,2,7,NULL),
    (54601,10,2,7,NULL),
    (54604,10,2,7,NULL),
    (54630,10,2,7,NULL),
    (54673,10,2,7,NULL),
    (54717,10,2,7,NULL),
    (54736,10,2,7,NULL),
    (54762,10,2,7,NULL),
    (54847,10,2,7,NULL),
    (54904,10,2,7,NULL),
    (54988,10,2,7,NULL),
    (55142,10,2,7,NULL),
    (55165,10,2,7,NULL),
    (55261,10,2,7,NULL),
    (55461,10,2,7,NULL),
    (55664,10,2,7,NULL),
    (55666,11,0,0,NULL),
    (55792,11,0,0,NULL),
    (55793,11,0,0,NULL),
    (55818,11,0,0,NULL),
    (55824,11,0,0,NULL),
    (55846,11,0,0,NULL),
    (55933,11,0,0,NULL),
    (55939,11,0,0,NULL),
    (55959,11,0,2,NULL),
    (55960,11,0,0,NULL),
    (56008,11,0,0,NULL),
    (56110,11,0,2,NULL),
    (56162,11,0,2,NULL),
    (56196,11,0,2,NULL),
    (56263,11,0,2,NULL),
    (56288,11,0,2,NULL),
    (56311,11,0,2,NULL),
    (56313,11,0,2,NULL);

CREATE TABLE IF NOT EXISTS ip_banned (
    ip VARCHAR(15) NOT NULL DEFAULT '127.0.0.1',
    bandate INTEGER NOT NULL,
    unbandate INTEGER NOT NULL,
    bannedby VARCHAR(50) NOT NULL DEFAULT '[CONSOLE]',
    banreason VARCHAR(255) NOT NULL DEFAULT 'NO REASON',
    PRIMARY KEY (ip, bandate)
);

COMMENT ON TABLE ip_banned IS 'Banned Ips';

CREATE TABLE IF NOT EXISTS logs (
    time INTEGER NOT NULL,
    realm INTEGER NOT NULL,
    type VARCHAR(250) NOT NULL,
    level SMALLINT NOT NULL DEFAULT 0,
    string TEXT NULL
);

CREATE TABLE IF NOT EXISTS logs_ip_actions (
    id SERIAL PRIMARY KEY,
    account_id INTEGER NOT NULL,
    character_guid BIGINT NOT NULL,
    realm_id INTEGER NOT NULL DEFAULT 0,
    type SMALLINT NOT NULL,
    ip VARCHAR(15) NOT NULL DEFAULT '127.0.0.1',
    systemnote TEXT,
    unixtime INTEGER NOT NULL,
    time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    comment TEXT
);

COMMENT ON TABLE logs_ip_actions IS 'Used to log ips of individual actions';
COMMENT ON COLUMN logs_ip_actions.id IS 'Unique Identifier';
COMMENT ON COLUMN logs_ip_actions.account_id IS 'Account ID';
COMMENT ON COLUMN logs_ip_actions.character_guid IS 'Character Guid';
COMMENT ON COLUMN logs_ip_actions.realm_id IS 'Realm ID';
COMMENT ON COLUMN logs_ip_actions.systemnote IS 'Notes inserted by system';
COMMENT ON COLUMN logs_ip_actions.unixtime IS 'Unixtime';
COMMENT ON COLUMN logs_ip_actions.time IS 'Timestamp';
COMMENT ON COLUMN logs_ip_actions.comment IS 'Allows users to add a comment';

CREATE TABLE IF NOT EXISTS rbac_permissions (
    id INTEGER NOT NULL DEFAULT 0,
    name VARCHAR(100) NOT NULL,
    PRIMARY KEY(id)
);

COMMENT ON TABLE rbac_permissions IS 'Permission List';
COMMENT ON COLUMN rbac_permissions.id IS 'Permission id';
COMMENT ON COLUMN rbac_permissions.name IS 'Permission name';

INSERT INTO rbac_permissions
VALUES
    (1,'Instant logout'),
    (2,'Skip Queue'),
    (3,'Join Normal Battleground'),
    (4,'Join Random Battleground'),
    (5,'Join Arenas'),
    (6,'Join Dungeon Finder'),
    (7,'Skip idle connection check'),
    (8,'Cannot earn achievements'),
    (9,'Cannot earn realm first achievements'),
    (11,'Log GM trades'),
    (13,'Skip Instance required bosses check'),
    (14,'Skip character creation team mask check'),
    (15,'Skip character creation class mask check'),
    (16,'Skip character creation race mask check'),
    (17,'Skip character creation reserved name check'),
    (18,'Skip character creation death knight min level check'),
    (19,'Skip needed requirements to use channel check'),
    (20,'Skip disable map check'),
    (21,'Skip reset talents when used more than allowed check'),
    (22,'Skip spam chat check'),
    (23,'Skip over-speed ping check'),
    (24,'Two side faction characters on the same account'),
    (25,'Allow say chat between factions'),
    (26,'Allow channel chat between factions'),
    (27,'Two side mail interaction'),
    (28,'See two side who list'),
    (29,'Add friends of other faction'),
    (30,'Save character without delay with .save command'),
    (31,'Use params with .unstuck command'),
    (32,'Can be assigned tickets with .assign ticket command'),
    (33,'Notify if a command was not found'),
    (34,'Check if should appear in list using .gm ingame command'),
    (35,'See all security levels with who command'),
    (36,'Filter whispers'),
    (37,'Use staff badge in chat'),
    (38,'Resurrect with full Health Points'),
    (39,'Restore saved gm setting states'),
    (40,'Allows to add a gm to friend list'),
    (41,'Use Config option START_GM_LEVEL to assign new character level'),
    (42,'Allows to use CMSG_WORLD_TELEPORT opcode'),
    (43,'Allows to use CMSG_WHOIS opcode'),
    (44,'Receive global GM messages/texts'),
    (45,'Join channels without announce'),
    (46,'Change channel settings without being channel moderator'),
    (47,'Can ignore non-strong lower security checks if its disabled in config'),
(48,'Enable IP, Last Login and EMail output in pinfo'),
(49,'Forces to enter the email for confirmation on password change'),
(50,'Allow user to check his own email with .account'),
(51,'Allow trading between factions'),
(52,'No battleground deserter debuff'),
(53,'Can be AFK on the battleground'),
(192,'Role: Sec Level Administrator'),
(193,'Role: Sec Level Gamemaster'),
(194,'Role: Sec Level Moderator'),
(195,'Role: Sec Level Player'),
(196,'Role: Administrator Commands'),
(197,'Role: Gamemaster Commands'),
(198,'Role: Moderator Commands'),
(199,'Role: Player Commands'),
(200,'Command: rbac'),
(201,'Command: rbac account'),
(202,'Command: rbac account list'),
(203,'Command: rbac account grant'),
(204,'Command: rbac account deny'),
(205,'Command: rbac account revoke'),
(206,'Command: rbac list'),
(217,'Command: account'),
(218,'Command: account addon'),
(219,'Command: account create'),
(220,'Command: account delete'),
(221,'Command: account lock'),
(222,'Command: account lock country'),
(223,'Command: account lock ip'),
(224,'Command: account onlinelist'),
(225,'Command: account password'),
(226,'Command: account set'),
(227,'Command: account set addon'),
(228,'Command: account set gmlevel'),
(229,'Command: account set password'),
(230,'Command: achievement'),
(231,'Command: achievement add'),
(232,'Command: arena'),
(233,'Command: arena captain'),
(234,'Command: arena create'),
(235,'Command: arena disband'),
(236,'Command: arena info'),
(237,'Command: arena lookup'),
(238,'Command: arena rename'),
(239,'Command: ban'),
(240,'Command: ban account'),
(241,'Command: ban character'),
(242,'Command: ban ip'),
(243,'Command: ban playeraccount'),
(244,'Command: baninfo'),
(245,'Command: baninfo account'),
(246,'Command: baninfo character'),
(247,'Command: baninfo ip'),
(248,'Command: banlist'),
(249,'Command: banlist account'),
(250,'Command: banlist character'),
(251,'Command: banlist ip'),
(252,'Command: unban'),
(253,'Command: unban account'),
(254,'Command: unban character'),
(255,'Command: unban ip'),
(256,'Command: unban playeraccount'),
(257,'Command: bf'),
(258,'Command: bf start'),
(259,'Command: bf stop'),
(260,'Command: bf switch'),
(261,'Command: bf timer'),
(262,'Command: bf enable'),
(263,'Command: account email'),
(264,'Command: account set sec'),
(265,'Command: account set sec email'),
(266,'Command: account set sec regmail'),
(267,'Command: cast'),
(268,'Command: cast back'),
(269,'Command: cast dist'),
(270,'Command: cast self'),
(271,'Command: cast target'),
(272,'Command: cast dest'),
(273,'Command: character'),
(274,'Command: character customize'),
(275,'Command: character changefaction'),
(276,'Command: character changerace'),
(277,'Command: character deleted'),
(279,'Command: character deleted list'),
(280,'Command: character deleted restore'),
(283,'Command: character level'),
(284,'Command: character rename'),
(285,'Command: character reputation'),
(286,'Command: character titles'),
(287,'Command: levelup'),
(288,'Command: pdump'),
(289,'Command: pdump load'),
(290,'Command: pdump write'),
(291,'Command: cheat'),
(292,'Command: cheat casttime'),
(293,'Command: cheat cooldown'),
(294,'Command: cheat explore'),
(295,'Command: cheat god'),
(296,'Command: cheat power'),
(297,'Command: cheat status'),
(298,'Command: cheat taxi'),
(299,'Command: cheat waterwalk'),
(300,'Command: debug'),
(301,'Command: debug anim'),
(302,'Command: debug areatriggers'),
(303,'Command: debug arena'),
(304,'Command: debug bg'),
(305,'Command: debug entervehicle'),
(306,'Command: debug getitemstate'),
(307,'Command: debug getitemvalue'),
(308,'Command: debug getvalue'),
(309,'Command: debug combat'),
(310,'Command: debug itemexpire'),
(311,'Command: debug lootrecipient'),
(312,'Command: debug los'),
(313,'Command: debug mod32value'),
(314,'Command: debug moveflags'),
(315,'Command: debug play'),
(316,'Command: debug play cinematics'),
(317,'Command: debug play movie'),
(318,'Command: debug play sound'),
(319,'Command: debug send'),
(320,'Command: debug send buyerror'),
(321,'Command: debug send channelnotify'),
(322,'Command: debug send chatmessage'),
(323,'Command: debug send equiperror'),
(324,'Command: debug send largepacket'),
(325,'Command: debug send opcode'),
(326,'Command: debug send qinvalidmsg'),
(327,'Command: debug send qpartymsg'),
(328,'Command: debug send sellerror'),
(329,'Command: debug send setphaseshift'),
(330,'Command: debug send spellfail'),
(331,'Command: debug setaurastate'),
(332,'Command: debug setbit'),
(333,'Command: debug setitemvalue'),
(334,'Command: debug setvalue'),
(335,'Command: debug setvid'),
(336,'Command: debug spawnvehicle'),
(337,'Command: debug threat'),
(338,'Command: debug update'),
(339,'Command: debug worldstate'),
(340,'Command: wpgps'),
(341,'Command: deserter'),
(342,'Command: deserter bg'),
(343,'Command: deserter bg add'),
(344,'Command: deserter bg remove'),
(345,'Command: deserter instance'),
(346,'Command: deserter instance add'),
(347,'Command: deserter instance remove'),
(348,'Command: disable'),
(349,'Command: disable add'),
(350,'Command: disable add achievement_criteria'),
(351,'Command: disable add battleground'),
(352,'Command: disable add map'),
(353,'Command: disable add mmap'),
(354,'Command: disable add outdoorpvp'),
(355,'Command: disable add quest'),
(356,'Command: disable add spell'),
(357,'Command: disable add vmap'),
(358,'Command: disable remove'),
(359,'Command: disable remove achievement_criteria'),
(360,'Command: disable remove battleground'),
(361,'Command: disable remove map'),
(362,'Command: disable remove mmap'),
(363,'Command: disable remove outdoorpvp'),
(364,'Command: disable remove quest'),
(365,'Command: disable remove spell'),
(366,'Command: disable remove vmap'),
(367,'Command: event'),
(368,'Command: event activelist'),
(369,'Command: event start'),
(370,'Command: event stop'),
(371,'Command: gm'),
(372,'Command: gm chat'),
(373,'Command: gm fly'),
(374,'Command: gm ingame'),
(375,'Command: gm list'),
(376,'Command: gm visible'),
(377,'Command: go'),
(378,'Command: account 2fa'),
(379,'Command: account 2fa setup'),
(380,'Command: account 2fa remove'),
(381,'Command: account set 2fa'),
(387,'Command: gobject'),
(388,'Command: gobject activate'),
(389,'Command: gobject add'),
(390,'Command: gobject add temp'),
(391,'Command: gobject delete'),
(392,'Command: gobject info'),
(393,'Command: gobject move'),
(394,'Command: gobject near'),
(395,'Command: gobject set'),
(396,'Command: gobject set phase'),
(397,'Command: gobject set state'),
(398,'Command: gobject target'),
(399,'Command: gobject turn'),
(400,'Command: debug transport'),
(401,'Command: guild'),
(402,'Command: guild create'),
(403,'Command: guild delete'),
(404,'Command: guild invite'),
(405,'Command: guild uninvite'),
(406,'Command: guild rank'),
(407,'Command: guild rename'),
(408,'Command: honor'),
(409,'Command: honor add'),
(410,'Command: honor add kill'),
(411,'Command: honor update'),
(412,'Command: instance'),
(413,'Command: instance listbinds'),
(414,'Command: instance unbind'),
(415,'Command: instance stats'),
(416,'Command: instance savedata'),
(417,'Command: learn'),
(418,'Command: learn all'),
(419,'Command: learn all my'),
(420,'Command: learn all my class'),
(421,'Command: learn all my pettalents'),
(422,'Command: learn all my spells'),
(423,'Command: learn all my talents'),
(424,'Command: learn all gm'),
(425,'Command: learn all crafts'),
(426,'Command: learn all default'),
(427,'Command: learn all lang'),
(428,'Command: learn all recipes'),
(429,'Command: unlearn'),
(430,'Command: lfg'),
(431,'Command: lfg player'),
(432,'Command: lfg group'),
(433,'Command: lfg queue'),
(434,'Command: lfg clean'),
(435,'Command: lfg options'),
(436,'Command: list'),
(437,'Command: list creature'),
(438,'Command: list item'),
(439,'Command: list object'),
(440,'Command: list auras'),
(441,'Command: list mail'),
(442,'Command: lookup'),
(443,'Command: lookup area'),
(444,'Command: lookup creature'),
(445,'Command: lookup event'),
(446,'Command: lookup faction'),
(447,'Command: lookup item'),
(448,'Command: lookup itemset'),
(449,'Command: lookup object'),
(450,'Command: lookup quest'),
(451,'Command: lookup player'),
(452,'Command: lookup player ip'),
(453,'Command: lookup player account'),
(454,'Command: lookup player email'),
(455,'Command: lookup skill'),
(456,'Command: lookup spell'),
(457,'Command: lookup spell id'),
(458,'Command: lookup taxinode'),
(459,'Command: lookup tele'),
(460,'Command: lookup title'),
(461,'Command: lookup map'),
(462,'Command: announce'),
(463,'Command: channel'),
(464,'Command: channel set'),
(465,'Command: channel set ownership'),
(466,'Command: gmannounce'),
(467,'Command: gmnameannounce'),
(468,'Command: gmnotify'),
(469,'Command: nameannounce'),
(470,'Command: notify'),
(471,'Command: whispers'),
(472,'Command: group'),
(473,'Command: group leader'),
(474,'Command: group disband'),
(475,'Command: group remove'),
(476,'Command: group join'),
(477,'Command: group list'),
(478,'Command: group summon'),
(479,'Command: pet'),
(480,'Command: pet create'),
(481,'Command: pet learn'),
(482,'Command: pet unlearn'),
(483,'Command: send'),
(484,'Command: send items'),
(485,'Command: send mail'),
(486,'Command: send message'),
(487,'Command: send money'),
(488,'Command: additem'),
(489,'Command: additemset'),
(490,'Command: appear'),
(491,'Command: aura'),
(492,'Command: bank'),
(493,'Command: bindsight'),
(494,'Command: combatstop'),
(495,'Command: cometome'),
(496,'Command: commands'),
(497,'Command: cooldown'),
(498,'Command: damage'),
(499,'Command: dev'),
(500,'Command: die'),
(501,'Command: dismount'),
(502,'Command: distance'),
(503,'Command: flusharenapoints'),
(504,'Command: freeze'),
(505,'Command: gps'),
(506,'Command: guid'),
(507,'Command: help'),
(508,'Command: hidearea'),
(509,'Command: itemmove'),
(510,'Command: kick'),
(511,'Command: linkgrave'),
(512,'Command: listfreeze'),
(513,'Command: maxskill'),
(514,'Command: movegens'),
(515,'Command: mute'),
(516,'Command: neargrave'),
(517,'Command: pinfo'),
(518,'Command: playall'),
(519,'Command: possess'),
(520,'Command: recall'),
(521,'Command: repairitems'),
(522,'Command: respawn'),
(523,'Command: revive'),
(524,'Command: saveall'),
(525,'Command: save'),
(526,'Command: setskill'),
(527,'Command: showarea'),
(528,'Command: summon'),
(529,'Command: unaura'),
(530,'Command: unbindsight'),
(531,'Command: unfreeze'),
(532,'Command: unmute'),
(533,'Command: unpossess'),
(534,'Command: unstuck'),
(535,'Command: wchange'),
(536,'Command: mmap'),
(537,'Command: mmap loadedtiles'),
(538,'Command: mmap loc'),
(539,'Command: mmap path'),
(540,'Command: mmap stats'),
(541,'Command: mmap testarea'),
(542,'Command: morph'),
(543,'Command: demorph'),
(544,'Command: modify'),
(545,'Command: modify arenapoints'),
(546,'Command: modify bit'),
(547,'Command: modify drunk'),
(548,'Command: modify energy'),
(549,'Command: modify faction'),
(550,'Command: modify gender'),
(551,'Command: modify honor'),
(552,'Command: modify hp'),
(553,'Command: modify mana'),
(554,'Command: modify money'),
(555,'Command: modify mount'),
(556,'Command: modify phase'),
(557,'Command: modify rage'),
(558,'Command: modify reputation'),
(559,'Command: modify runicpower'),
(560,'Command: modify scale'),
(561,'Command: modify speed'),
(562,'Command: modify speed all'),
(563,'Command: modify speed backwalk'),
(564,'Command: modify speed fly'),
(565,'Command: modify speed walk'),
(566,'Command: modify speed swim'),
(567,'Command: modify spell'),
(568,'Command: modify standstate'),
(569,'Command: modify talentpoints'),
(570,'Command: npc'),
(571,'Command: npc add'),
(572,'Command: npc add formation'),
(573,'Command: npc add item'),
(574,'Command: npc add move'),
(575,'Command: npc add temp'),
(576,'Command: npc add delete'),
(577,'Command: npc add delete item'),
(578,'Command: npc add follow'),
(579,'Command: npc add follow stop'),
(580,'Command: npc set'),
(581,'Command: npc set allowmove'),
(582,'Command: npc set entry'),
(583,'Command: npc set factionid'),
(584,'Command: npc set flag'),
(585,'Command: npc set level'),
(586,'Command: npc set link'),
(587,'Command: npc set model'),
(588,'Command: npc set movetype'),
(589,'Command: npc set phase'),
(590,'Command: npc set spawndist'),
(591,'Command: npc set spawntime'),
(592,'Command: npc set data'),
(593,'Command: npc info'),
(594,'Command: npc near'),
(595,'Command: npc move'),
(596,'Command: npc playemote'),
(597,'Command: npc say'),
(598,'Command: npc textemote'),
(599,'Command: npc whisper'),
(600,'Command: npc yell'),
(601,'Command: npc tame'),
(602,'Command: quest'),
(603,'Command: quest add'),
(604,'Command: quest complete'),
(605,'Command: quest remove'),
(606,'Command: quest reward'),
(607,'Command: reload'),
(608,'Command: reload access_requirement'),
(609,'Command: reload achievement_criteria_data'),
(610,'Command: reload achievement_reward'),
(611,'Command: reload all'),
(612,'Command: reload all achievement'),
(613,'Command: reload all area'),
(614,'Command: broadcast_text'),
(615,'Command: reload all gossips'),
(616,'Command: reload all item'),
(617,'Command: reload all locales'),
(618,'Command: reload all loot'),
(619,'Command: reload all npc'),
(620,'Command: reload all quest'),
(621,'Command: reload all scripts'),
(622,'Command: reload all spell'),
(623,'Command: reload areatrigger_involvedrelation'),
(624,'Command: reload areatrigger_tavern'),
(625,'Command: reload areatrigger_teleport'),
(626,'Command: reload auctions'),
(627,'Command: reload autobroadcast'),
(628,'Command: reload command'),
(629,'Command: reload conditions'),
(630,'Command: reload config'),
(631,'Command: reload battleground_template'),
(632,'Command: .mutehistory'),
(633,'Command: reload creature_linked_respawn'),
(634,'Command: reload creature_loot_template'),
(635,'Command: reload creature_onkill_reputation'),
(636,'Command: reload creature_questender'),
(637,'Command: reload creature_queststarter'),
(638,'Command: reload creature_summon_groups'),
(639,'Command: reload creature_template'),
(640,'Command: reload creature_text'),
(641,'Command: reload disables'),
(642,'Command: reload disenchant_loot_template'),
(643,'Command: reload event_scripts'),
(644,'Command: reload fishing_loot_template'),
(645,'Command: reload graveyard_zone'),
(646,'Command: reload game_tele'),
(647,'Command: reload gameobject_questender'),
(648,'Command: reload gameobject_loot_template'),
(649,'Command: reload gameobject_queststarter'),
(650,'Command: reload gm_tickets'),
(651,'Command: reload gossip_menu'),
(652,'Command: reload gossip_menu_option'),
(653,'Command: reload item_enchantment_template'),
(654,'Command: reload item_loot_template'),
(655,'Command: reload item_set_names'),
(656,'Command: reload lfg_dungeon_rewards'),
(657,'Command: reload locales_achievement_reward'),
(658,'Command: reload locales_creature'),
(659,'Command: reload locales_creature_text'),
(660,'Command: reload locales_gameobject'),
(661,'Command: reload locales_gossip_menu_option'),
(662,'Command: reload locales_item'),
(663,'Command: reload locales_item_set_name'),
(664,'Command: reload locales_npc_text'),
(665,'Command: reload locales_page_text'),
(666,'Command: reload locales_points_of_interest'),
(667,'Command: reload locales_quest'),
(668,'Command: reload mail_level_reward'),
(669,'Command: reload mail_loot_template'),
(670,'Command: reload milling_loot_template'),
(671,'Command: reload npc_spellclick_spells'),
(672,'Command: reload trainer'),
(673,'Command: reload npc_vendor'),
(674,'Command: reload page_text'),
(675,'Command: reload pickpocketing_loot_template'),
(676,'Command: reload points_of_interest'),
(677,'Command: reload prospecting_loot_template'),
(678,'Command: reload quest_poi'),
(679,'Command: reload quest_template'),
(680,'Command: reload rbac'),
(681,'Command: reload reference_loot_template'),
(682,'Command: reload reserved_name'),
(683,'Command: reload reputation_reward_rate'),
(684,'Command: reload reputation_spillover_template'),
(685,'Command: reload skill_discovery_template'),
(686,'Command: reload skill_extra_item_template'),
(687,'Command: reload skill_fishing_base_level'),
(688,'Command: reload skinning_loot_template'),
(689,'Command: reload smart_scripts'),
(690,'Command: reload spell_required'),
(691,'Command: reload spell_area'),
(692,'Command: reload spell_bonus_data'),
(693,'Command: reload spell_group'),
(694,'Command: reload spell_learn_spell'),
(695,'Command: reload spell_loot_template'),
(696,'Command: reload spell_linked_spell'),
(697,'Command: reload spell_pet_auras'),
(698,'Command: character changeaccount'),
(699,'Command: reload spell_proc'),
(700,'Command: reload spell_scripts'),
(701,'Command: reload spell_target_position'),
(702,'Command: reload spell_threats'),
(703,'Command: reload spell_group_stack_rules'),
(704,'Command: reload trinity_string'),
(706,'Command: reload waypoint_scripts'),
(707,'Command: reload waypoint_data'),
(708,'Command: reload vehicle_accessory'),
(709,'Command: reload vehicle_template_accessory'),
(710,'Command: reset'),
(711,'Command: reset achievements'),
(712,'Command: reset honor'),
(713,'Command: reset level'),
(714,'Command: reset spells'),
(715,'Command: reset stats'),
(716,'Command: reset talents'),
(717,'Command: reset all'),
(718,'Command: server'),
(719,'Command: server corpses'),
(720,'Command: server exit'),
(721,'Command: server idlerestart'),
(722,'Command: server idlerestart cancel'),
(723,'Command: server idleshutdown'),
(724,'Command: server idleshutdown cancel'),
(725,'Command: server info'),
(726,'Command: server plimit'),
(727,'Command: server restart'),
(728,'Command: server restart cancel'),
(729,'Command: server set'),
(730,'Command: server set closed'),
(731,'Command: server set difftime'),
(732,'Command: server set loglevel'),
(733,'Command: server set motd'),
(734,'Command: server shutdown'),
(735,'Command: server shutdown cancel'),
(736,'Command: server motd'),
(737,'Command: tele'),
(738,'Command: tele add'),
(739,'Command: tele del'),
(740,'Command: tele name'),
(741,'Command: tele group'),
(742,'Command: ticket'),
(743,'Command: ticket assign'),
(744,'Command: ticket close'),
(745,'Command: ticket closedlist'),
(746,'Command: ticket comment'),
(747,'Command: ticket complete'),
(748,'Command: ticket delete'),
(749,'Command: ticket escalate'),
(750,'Command: ticket escalatedlist'),
(751,'Command: ticket list'),
(752,'Command: ticket onlinelist'),
(753,'Command: ticket reset'),
(754,'Command: ticket response'),
(755,'Command: ticket response append'),
(756,'Command: ticket response appendln'),
(757,'Command: ticket togglesystem'),
(758,'Command: ticket unassign'),
(759,'Command: ticket viewid'),
(760,'Command: ticket viewname'),
(761,'Command: titles'),
(762,'Command: titles add'),
(763,'Command: titles current'),
(764,'Command: titles remove'),
(765,'Command: titles set'),
(766,'Command: titles set mask'),
(767,'Command: wp'),
(768,'Command: wp add'),
(769,'Command: wp event'),
(770,'Command: wp load'),
(771,'Command: wp modify'),
(772,'Command: wp unload'),
(773,'Command: wp reload'),
(774,'Command: wp show'),
(777,'Command: mailbox'),
(778,'Command: ahbot'),
(779,'Command: ahbot items'),
(780,'Command: ahbot items gray'),
(781,'Command: ahbot items white'),
(782,'Command: ahbot items green'),
(783,'Command: ahbot items blue'),
(784,'Command: ahbot items purple'),
(785,'Command: ahbot items orange'),
(786,'Command: ahbot items yellow'),
(787,'Command: ahbot ratio'),
(788,'Command: ahbot ratio alliance'),
(789,'Command: ahbot ratio horde'),
(790,'Command: ahbot ratio neutral'),
(791,'Command: ahbot rebuild'),
(792,'Command: ahbot reload'),
(793,'Command: ahbot status'),
(794,'Command: guild info'),
(795,'Command: instance setbossstate'),
(796,'Command: instance getbossstate'),
(797,'Command: pvpstats'),
(798,'Command: mod xp'),
(835,'Command: debug loadcells'),
(836,'Command: debug boundary'),
(837,'Command: npc evade'),
(838,'Command: pet level'),
(839,'Command: server shutdown force'),
(840,'Command: server restart force'),
(841,'Command: debug neargraveyard'),
(843,'Command: reload quest_greeting'),
(852,'Command: debug dummy'),
(855,'Command: debug play music'),
(856,'Command: npc spawngroup'),
(857,'Command: npc despawngroup'),
(858,'Command: gobject spawngroup'),
(859,'Command: gobject despawngroup'),
(860,'Command: list respawns'),
(861,'Command: group set'),
(862,'Command: group set assistant'),
(863,'Command: group set maintank'),
(864,'Command: group set mainassist'),
(865,'Command: npc showloot'),
(866,'Command: list spawnpoints'),
(867,'Command: reload quest_greeting_locale'),
(870,'Command: debug threatinfo'),
(871,'Command: debug instancespawn'),
(872,'Command: server debug'),
(873,'Command: reload creature_movement_override'),
(874,'Command: debug asan'),
(875,'Command: lookup map id'),
(876,'Command: lookup item id'),
(877,'Command: lookup quest id'),
(878,'Command: debug questreset'),
(879,'Command: debug poolstatus'),
(880,'Command: pdump copy'),
(881,'Command: reload vehicle_template'),
(884,'Command: bg start'),
(885,'Command: bg stop');

CREATE TABLE IF NOT EXISTS rbac_account_permissions (
    account_id INTEGER NOT NULL,
    permission_id INTEGER NOT NULL,
    granted SMALLINT NOT NULL DEFAULT 1,
    realm_id INTEGER NOT NULL DEFAULT -1,

    PRIMARY KEY(account_id, permission_id, realm_id),
    CONSTRAINT fk__rbac_account_permissions__acount FOREIGN KEY (account_id) REFERENCES account(id) ON DELETE CASCADE,
    CONSTRAINT fx__rbac_account_roles__rbac_permissions FOREIGN KEY (permission_id) REFERENCES rbac_permissions(id) ON DELETE CASCADE
);

CREATE INDEX idx_rbac_account_permissions_permission_id ON rbac_account_permissions (permission_id);

COMMENT ON TABLE rbac_account_permissions IS 'Account-Permission relation';
COMMENT ON COLUMN rbac_account_permissions.account_id IS 'Account id';
COMMENT ON COLUMN rbac_account_permissions.permission_id IS 'Permission id';
COMMENT ON COLUMN rbac_account_permissions.granted IS 'Granted = 1, Denied = 0';
COMMENT ON COLUMN rbac_account_permissions.realm_id IS 'Realm Id, -1 means all';


CREATE TABLE IF NOT EXISTS rbac_default_permissions (
    sec_id INTEGER NOT NULL,
    permission_id INTEGER NOT NULL,
    realm_id INTEGER NOT NULL DEFAULT -1,

    PRIMARY KEY (sec_id, permission_id, realm_id),
    CONSTRAINT fk__rbac_default_permissions__rbac_permissions FOREIGN KEY (permission_id) REFERENCES rbac_permissions (id)
);

CREATE INDEX idx_rbac_default_permissions_permission_id ON rbac_default_permissions (permission_id);

COMMENT ON TABLE rbac_default_permissions IS 'Default permission to assign to different account security levels';
COMMENT ON COLUMN rbac_default_permissions.sec_id IS 'Security Level id';
COMMENT ON COLUMN rbac_default_permissions.permission_id IS 'Permission id';
COMMENT ON COLUMN rbac_default_permissions.realm_id IS 'Realm Id, -1 means all';

INSERT INTO rbac_default_permissions
VALUES
    (3,192,-1),
    (2,193,-1),
    (1,194,-1),
    (0,195,-1);

CREATE TABLE IF NOT EXISTS rbac_linked_permissions (
    id INTEGER NOT NULL,
    linked_id INTEGER NOT NULL,

    PRIMARY KEY (id, linked_id),
    CONSTRAINT fk__rbac_linked_permissions__rbac_permissions1 FOREIGN KEY (id) REFERENCES rbac_permissions(id) ON DELETE CASCADE,
    CONSTRAINT fk__rbac_linked_permissions__rbac_permissions2 FOREIGN KEY (linked_id) REFERENCES rbac_permissions(id) ON DELETE CASCADE
);

CREATE INDEX idx_rbac_linked_permissions_id ON rbac_linked_permissions (id);
CREATE INDEX idx_rbac_linked_permissions_linked_id ON rbac_linked_permissions (linked_id);

COMMENT ON TABLE rbac_linked_permissions IS 'Permission - Linked Permissions relation';
COMMENT ON COLUMN rbac_linked_permissions.id IS 'Permission id';
COMMENT ON COLUMN rbac_linked_permissions.linked_id IS 'Linked Permission id';


ALTER TABLE rbac_linked_permissions DISABLE TRIGGER ALL;
INSERT INTO rbac_linked_permissions
VALUES
    (192,7),
    (192,21),
    (192,42),
    (192,43),
    (192,193),
    (192,196),
    (192,778),
    (192,779),
    (192,780),
    (192,781),
    (192,782),
    (192,783),
    (192,784),
    (192,785),
    (192,786),
    (192,787),
    (192,788),
    (192,789),
    (192,790),
    (192,791),
    (192,792),
    (192,793),
    (192,794),
    (192,795),
    (192,796),
    (192,835),
    (193,48),
    (193,52),
    (193,53),
    (193,194),
    (193,197),
    (194,1),
    (194,2),
    (194,9),
    (194,11),
    (194,13),
    (194,14),
    (194,15),
    (194,16),
    (194,17),
    (194,18),
    (194,19),
    (194,20),
    (194,22),
    (194,23),
    (194,25),
    (194,26),
    (194,27),
    (194,28),
    (194,29),
    (194,30),
    (194,31),
    (194,32),
    (194,33),
    (194,34),
    (194,35),
    (194,36),
    (194,37),
    (194,38),
    (194,39),
    (194,40),
    (194,41),
    (194,44),
    (194,46),
    (194,47),
    (194,51),
    (194,195),
    (194,198),
    (194,632),
    (194,798),
    (195,3),
    (195,4),
    (195,5),
    (195,6),
    (195,24),
    (195,49),
    (195,199),
    (196,202),
    (196,203),
    (196,204),
    (196,205),
    (196,206),
    (196,226),
    (196,227),
    (196,230),
    (196,231),
    (196,233),
    (196,234),
    (196,235),
    (196,238),
    (196,239),
    (196,240),
    (196,241),
    (196,242),
    (196,243),
    (196,244),
    (196,245),
    (196,246),
    (196,247),
    (196,248),
    (196,249),
    (196,250),
    (196,251),
    (196,252),
    (196,253),
    (196,254),
    (196,255),
    (196,256),
    (196,257),
    (196,258),
    (196,259),
    (196,260),
    (196,261),
    (196,262),
    (196,264),
    (196,265),
    (196,266),
    (196,267),
    (196,268),
    (196,269),
    (196,270),
    (196,271),
    (196,272),
    (196,279),
    (196,280),
    (196,283),
    (196,287),
    (196,288),
    (196,289),
    (196,290),
    (196,291),
    (196,292),
    (196,293),
    (196,294),
    (196,295),
    (196,296),
    (196,297),
    (196,298),
    (196,299),
    (196,302),
    (196,303),
    (196,304),
    (196,305),
    (196,306),
    (196,307),
    (196,308),
    (196,309),
    (196,310),
    (196,313),
    (196,314),
    (196,319),
    (196,320),
    (196,321),
    (196,322),
    (196,323),
    (196,324),
    (196,325),
    (196,326),
    (196,327),
    (196,328),
    (196,329),
    (196,330),
    (196,331),
    (196,332),
    (196,333),
    (196,334),
    (196,335),
    (196,336),
    (196,337),
    (196,338),
    (196,339),
    (196,340),
    (196,341),
    (196,342),
    (196,343),
    (196,344),
    (196,345),
    (196,346),
    (196,347),
    (196,348),
    (196,349),
    (196,350),
    (196,351),
    (196,352),
    (196,353),
    (196,354),
    (196,355),
    (196,356),
    (196,357),
    (196,358),
    (196,359),
    (196,360),
    (196,361),
    (196,362),
    (196,363),
    (196,364),
    (196,365),
    (196,366),
    (196,373),
    (196,375),
    (196,400),
    (196,401),
    (196,402),
    (196,403),
    (196,404),
    (196,405),
    (196,406),
    (196,407),
    (196,417),
    (196,418),
    (196,419),
    (196,420),
    (196,421),
    (196,422),
    (196,423),
    (196,424),
    (196,425),
    (196,426),
    (196,427),
    (196,428),
    (196,429),
    (196,434),
    (196,435),
    (196,436),
    (196,437),
    (196,438),
    (196,439),
    (196,440),
    (196,441),
    (196,442),
    (196,443),
    (196,444),
    (196,445),
    (196,446),
    (196,447),
    (196,448),
    (196,449),
    (196,450),
    (196,451),
    (196,452),
    (196,453),
    (196,454),
    (196,455),
    (196,456),
    (196,457),
    (196,458),
    (196,459),
    (196,461),
    (196,463),
    (196,464),
    (196,465),
    (196,472),
    (196,474),
    (196,475),
    (196,476),
    (196,477),
    (196,478),
    (196,488),
    (196,489),
    (196,491),
    (196,492),
    (196,493),
    (196,495),
    (196,497),
    (196,498),
    (196,499),
    (196,500),
    (196,502),
    (196,503),
    (196,505),
    (196,508),
    (196,511),
    (196,513),
    (196,514),
    (196,516),
    (196,519),
    (196,522),
    (196,523),
    (196,526),
    (196,527),
    (196,529),
    (196,530),
    (196,533),
    (196,535),
    (196,536),
    (196,537),
    (196,538),
    (196,539),
    (196,540),
    (196,541),
    (196,556),
    (196,581),
    (196,582),
    (196,592),
    (196,593),
    (196,596),
    (196,602),
    (196,603),
    (196,604),
    (196,605),
    (196,606),
    (196,607),
    (196,608),
    (196,609),
    (196,610),
    (196,611),
    (196,612),
    (196,613),
    (196,614),
    (196,615),
    (196,616),
    (196,617),
    (196,618),
    (196,619),
    (196,620),
    (196,621),
    (196,622),
    (196,623),
    (196,624),
    (196,625),
    (196,626),
    (196,627),
    (196,628),
    (196,629),
    (196,630),
    (196,631),
    (196,633),
    (196,634),
    (196,635),
    (196,636),
    (196,637),
    (196,638),
    (196,639),
    (196,640),
    (196,641),
    (196,642),
    (196,643),
    (196,644),
    (196,645),
    (196,646),
    (196,647),
    (196,648),
    (196,649),
    (196,650),
    (196,651),
    (196,652),
    (196,653),
    (196,654),
    (196,655),
    (196,656),
    (196,657),
    (196,658),
    (196,659),
    (196,660),
    (196,661),
    (196,662),
    (196,663),
    (196,664),
    (196,665),
    (196,666),
    (196,667),
    (196,668),
    (196,669),
    (196,670),
    (196,671),
    (196,672),
    (196,673),
    (196,674),
    (196,675),
    (196,676),
    (196,677),
    (196,678),
    (196,679),
    (196,680),
    (196,681),
    (196,682),
    (196,683),
    (196,684),
    (196,685),
    (196,686),
    (196,687),
    (196,688),
    (196,689),
    (196,690),
    (196,691),
    (196,692),
    (196,693),
    (196,694),
    (196,695),
    (196,696),
    (196,697),
    (196,698),
    (196,699),
    (196,700),
    (196,701),
    (196,702),
    (196,703),
    (196,704),
    (196,706),
    (196,707),
    (196,708),
    (196,709),
    (196,710),
    (196,711),
    (196,712),
    (196,713),
    (196,714),
    (196,715),
    (196,716),
    (196,717),
    (196,718),
    (196,719),
    (196,721),
    (196,722),
    (196,723),
    (196,724),
    (196,725),
    (196,726),
    (196,727),
    (196,728),
    (196,729),
    (196,730),
    (196,733),
    (196,734),
    (196,735),
    (196,736),
    (196,738),
    (196,739),
    (196,748),
    (196,753),
    (196,757),
    (196,773),
    (196,777),
    (196,836),
    (196,837),
    (196,838),
    (196,839),
    (196,840),
    (196,841),
    (196,843),
    (196,852),
    (196,866),
    (196,867),
    (196,870),
    (196,871),
    (196,872),
    (196,873),
    (196,875),
    (196,876),
    (196,877),
    (196,878),
    (196,879),
    (196,881),
    (197,232),
    (197,236),
    (197,237),
    (197,273),
    (197,274),
    (197,275),
    (197,276),
    (197,277),
    (197,284),
    (197,285),
    (197,286),
    (197,301),
    (197,311),
    (197,387),
    (197,388),
    (197,389),
    (197,390),
    (197,391),
    (197,392),
    (197,393),
    (197,394),
    (197,395),
    (197,396),
    (197,397),
    (197,398),
    (197,399),
    (197,473),
    (197,479),
    (197,480),
    (197,481),
    (197,482),
    (197,485),
    (197,486),
    (197,487),
    (197,494),
    (197,501),
    (197,506),
    (197,509),
    (197,510),
    (197,517),
    (197,518),
    (197,521),
    (197,542),
    (197,543),
    (197,550),
    (197,558),
    (197,568),
    (197,571),
    (197,572),
    (197,573),
    (197,574),
    (197,575),
    (197,576),
    (197,577),
    (197,578),
    (197,579),
    (197,580),
    (197,583),
    (197,584),
    (197,585),
    (197,586),
    (197,587),
    (197,588),
    (197,589),
    (197,590),
    (197,591),
    (197,594),
    (197,595),
    (197,601),
    (197,743),
    (197,750),
    (197,758),
    (197,761),
    (197,762),
    (197,763),
    (197,764),
    (197,765),
    (197,766),
    (197,767),
    (197,768),
    (197,769),
    (197,770),
    (197,771),
    (197,772),
    (197,774),
    (197,856),
    (197,857),
    (197,858),
    (197,859),
    (197,860),
    (197,861),
    (197,862),
    (197,863),
    (197,864),
    (197,865),
    (197,884),
    (197,885),
    (198,218),
    (198,300),
    (198,312),
    (198,315),
    (198,316),
    (198,317),
    (198,318),
    (198,367),
    (198,368),
    (198,369),
    (198,370),
    (198,371),
    (198,372),
    (198,374),
    (198,376),
    (198,377),
    (198,408),
    (198,409),
    (198,410),
    (198,411),
    (198,412),
    (198,413),
    (198,414),
    (198,415),
    (198,416),
    (198,430),
    (198,431),
    (198,432),
    (198,433),
    (198,462),
    (198,466),
    (198,467),
    (198,468),
    (198,469),
    (198,470),
    (198,471),
    (198,483),
    (198,484),
    (198,490),
    (198,504),
    (198,512),
    (198,515),
    (198,520),
    (198,524),
    (198,528),
    (198,531),
    (198,532),
    (198,544),
    (198,545),
    (198,546),
    (198,547),
    (198,548),
    (198,549),
    (198,551),
    (198,552),
    (198,553),
    (198,554),
    (198,555),
    (198,557),
    (198,559),
    (198,560),
    (198,561),
    (198,562),
    (198,563),
    (198,564),
    (198,565),
    (198,566),
    (198,567),
    (198,569),
    (198,570),
    (198,597),
    (198,598),
    (198,599),
    (198,600),
    (198,737),
    (198,740),
    (198,741),
    (198,742),
    (198,744),
    (198,745),
    (198,746),
    (198,747),
    (198,749),
    (198,751),
    (198,752),
    (198,754),
    (198,755),
    (198,756),
    (198,759),
    (198,760),
    (198,855),
    (199,217),
    (199,221),
    (199,222),
    (199,223),
    (199,225),
    (199,263),
    (199,378),
    (199,379),
    (199,380),
    (199,496),
    (199,507),
    (199,525),
    (199,534),
    (199,797);
ALTER TABLE rbac_linked_permissions ENABLE TRIGGER ALL;

CREATE TABLE IF NOT EXISTS realmcharacters (
    realm_id INTEGER NOT NULL DEFAULT 0,
    acct_id INTEGER NOT NULL,
    num_chars SMALLINT NOT NULL DEFAULT 0,

    PRIMARY KEY (realm_id, acct_id)
);

CREATE INDEX idx_realmcharacters_acctid ON realmcharacters (acct_id);

COMMENT ON TABLE realmcharacters IS 'Realm Character Tracker';

CREATE TABLE IF NOT EXISTS realmlist (
    id SERIAL PRIMARY KEY,
    name VARCHAR(32) NOT NULL DEFAULT '',
    address VARCHAR(255) NOT NULL DEFAULT '127.0.0.1',
    local_address VARCHAR(255) NOT NULL DEFAULT '127.0.0.1',
    local_subnet_mask VARCHAR(255) NOT NULL DEFAULT '255.255.255.0',
    port INTEGER NOT NULL DEFAULT 8085,
    icon SMALLINT NOT NULL DEFAULT 0,
    flag SMALLINT NOT NULL DEFAULT 2,
    timezone SMALLINT NOT NULL DEFAULT 0,
    allowed_security_level SMALLINT NOT NULL DEFAULT 0,
    population REAL NOT NULL DEFAULT 0,
    gmaebuild INTEGER NOT NULL DEFAULT 12340,

    CONSTRAINT idx_name UNIQUE (name)
);

ALTER SEQUENCE realmlist_id_seq RESTART WITH 2;

COMMENT ON TABLE realmlist IS 'Realm System';

INSERT INTO realmlist
VALUES
    (1,'Titancore','127.0.0.1','127.0.0.1','255.255.255.0',8085,0,2,1,0,0,12340);

CREATE TABLE IF NOT EXISTS secret_digest (
    id INTEGER NOT NULL,
    digest VARCHAR(100) NOT NULL,

    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS uptime (
    realmid INTEGER NOT NULL,
    starttime INTEGER NOT NULL DEFAULT 0,
    uptime INTEGER NOT NULL DEFAULT 0,
    maxplayers SMALLINT NOT NULL DEFAULT 0,
    revision VARCHAR(255) NOT NULL DEFAULT 'Titancore'
);

--#: end

--#: migration.down
DROP TABLE uptime;
DROP TABLE secret_digest;
DROP TABLE realmlist;
DROP TABLE realmcharacters;
DROP TABLE rbac_linked_permissions;
DROP TABLE rbac_default_permissions;
DROP TABLE rbac_account_permissions;
DROP TABLE rbac_permissions;
DROP TABLE logs_ip_actions;
DROP TABLE logs;
DROP TABLE ip_banned;
DROP TABLE build_info;
DROP TABLE build_executable_hash;
DROP TABLE build_auth_key;
DROP TABLE autobroadcast;
DROP TABLE account_muted;
DROP TABLE account_banned;
DROP TABLE account;

--#: end
